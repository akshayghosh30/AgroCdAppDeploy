apiVersion: networking.k8s.io/v1
kind: Ingress

#adding here under the namespace argocd
metadata:
  name: argocd-server-ingress
  namespace: argocd
  annotations:
  # 2 annotations as before in terraform way
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
spec:
# applied the modern approach
  ingressClassName: alb
  # using default backend since its for testing
  # allowing http on port 80
  defaultBackend:
    service:
      name: argocd-server
      port:
        number: 80
